{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-md-8 mx-auto">
        <h2 class="mb-4">‚öôÔ∏è Settings</h2>

        <form method="post" action="/settings/save">
            <!-- API Keys Section -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">üîë API Keys</h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <label class="form-label">TMDB API Key</label>
                        <input type="password" class="form-control" name="tmdb_api_key"
                            value="{{ config.tmdb_api_key or '' }}" placeholder="Enter TMDB API key">
                        <small class="text-muted">Get one from themoviedb.org</small>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Plex Token</label>
                        <input type="password" class="form-control" name="plex_token"
                            value="{{ config.plex_token or '' }}" placeholder="Enter Plex token">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Prowlarr URL</label>
                        <input type="text" class="form-control" name="prowlarr_url"
                            value="{{ config.prowlarr_url or 'http://prowlarr:9696' }}"
                            placeholder="http://prowlarr:9696">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Prowlarr API Key</label>
                        <input type="password" class="form-control" name="prowlarr_api_key"
                            value="{{ config.prowlarr_api_key or '' }}" placeholder="Enter Prowlarr API key">
                    </div>
                </div>
            </div>

            <!-- Debrid Service Section -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">‚òÅÔ∏è Debrid Service</h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <label class="form-label">Active Debrid Service</label>
                        <select class="form-select" name="debrid_service">
                            <option value="torbox" {% if config.debrid_service=='torbox' %}selected{% endif %}>
                                Torbox
                            </option>
                            <option value="realdebrid" {% if config.debrid_service=='realdebrid' %}selected{% endif %}>
                                RealDebrid
                            </option>
                        </select>
                    </div>
                    <hr>
                    <div class="mb-3">
                        <label class="form-label">Torbox API Key</label>
                        <input type="password" class="form-control" name="torbox_api_key"
                            value="{{ config.torbox_api_key or '' }}" placeholder="Enter Torbox API key">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">RealDebrid API Key</label>
                        <input type="password" class="form-control" name="realdebrid_api_key"
                            value="{{ config.realdebrid_api_key or '' }}" placeholder="Enter RealDebrid API key">
                    </div>
                </div>
            </div>

            <!-- Quality Settings -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">üé¨ Quality Settings</h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <label class="form-label">Quality Profile</label>
                        <select class="form-select" name="quality_profile">
                            <option value="hd" {% if config.quality_profile=='hd' %}selected{% endif %}>HD (720p/1080p)
                            </option>
                            <option value="fhd" {% if config.quality_profile=='fhd' %}selected{% endif %}>Full HD
                                (1080p)</option>
                            <option value="uhd" {% if config.quality_profile=='uhd' %}selected{% endif %}>4K UHD
                            </option>
                        </select>
                    </div>
                    <div class="form-check mb-3">
                        <input type="checkbox" class="form-check-input" name="allow_4k" id="allow4k" {% if
                            config.allow_4k %}checked{% endif %}>
                        <label class="form-check-label" for="allow4k">Allow 4K downloads</label>
                    </div>
                </div>
            </div>

            <!-- Paths -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="mb-0">üìÅ Paths</h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <label class="form-label">Mount Path (Debrid files)</label>
                        <input type="text" class="form-control" name="mount_path"
                            value="{{ config.mount_path or '/mnt/torbox' }}">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Media Path (Symlinks/VFS)</label>
                        <input type="text" class="form-control" name="symlink_path"
                            value="{{ config.symlink_path or '/mnt/media' }}">
                    </div>
                </div>
            </div>

            <div class="d-grid gap-2">
                <button type="submit" class="btn btn-primary btn-lg">üíæ Save Settings</button>
            </div>
        </form>

        {% if message %}
        <div class="alert alert-success mt-3">{{ message }}</div>
        {% endif %}
    </div>
</div>
{% endblock %}